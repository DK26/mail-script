<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>OSA-Mailer Guidebook</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Configure an SMTP Server with Gmail</div></li><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">2.</strong> OSA-Mailer Setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="setup-windows.html"><strong aria-hidden="true">2.1.</strong> Windows</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.2.</strong> Linux</div></li></ol></li><li class="chapter-item expanded "><a href="sending-an-email.html"><strong aria-hidden="true">3.</strong> Sending an E-mail</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="common_email_entry.html"><strong aria-hidden="true">3.1.</strong> Common E-mail Entry</a></li><li class="chapter-item expanded "><a href="basic_email.html"><strong aria-hidden="true">3.2.</strong> Basic E-mail</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Advanced E-mail</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Creating a Client</li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Flow</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> E-mail Entry</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> The Outbox</div></li><li class="chapter-item expanded affix "><li class="part-title">Smart Templates</li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Template Anatomy</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Template File</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Manifest File</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Default Configurations</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Create Your Own Template</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> HTML Template</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.1.</strong> ChatGPT</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Tera</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> Handlebars</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Liquid</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Custom Functions</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Preview with the Rendit Tool</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Hub / Marketplace</div></li><li class="chapter-item expanded affix "><li class="part-title">Troubleshooting</li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> E-mail Report on Error</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> Logs</div></li><li class="chapter-item expanded affix "><li class="part-title">Roadmap</li><li class="chapter-item expanded "><a href="roadmap-community-vision.html"><strong aria-hidden="true">14.</strong> Open Source Community Vision</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>Contributors</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OSA-Mailer Guidebook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/DK26/osa-mailer-docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div align="center"> 
<p><img src="images/logo.png" alt="OSA-Mailer Logo" /></p>
<p><strong>OSA-Mailer</strong> engine allows you to send dynamic and sophisticated E-mails, using Smart Templates</p>
</div>
<h2 id="osa-stands-for-open-smart-alert"><a class="header" href="#osa-stands-for-open-smart-alert"><strong>O.S.A</strong> stands for: <strong><em>Open Smart Alert</em></strong></a></h2>
<h3 id="open"><a class="header" href="#open">Open</a></h3>
<p>It is a free and open-source feature-rich backend engine for sending automated E-mails.</p>
<h3 id="smart"><a class="header" href="#smart">Smart</a></h3>
<p>It is using sophisticated, programable HTML templates (&quot;Smart Templates&quot;) that can provide advanced capabilities when producing E-mails.</p>
<h3 id="alert"><a class="header" href="#alert">Alert</a></h3>
<p>It is designed in the context of alerting or notifying about events and elegantly providing relevant context about them. 
(It can also be used to send newsletters, but for now you'll have to handle your own subscriptions backend services).</p>
<h2 id="main-features"><a class="header" href="#main-features">Main Features</a></h2>
<ul>
<li>Manages different smart templates for different categories of your choice</li>
<li>Identifies a common denominator for multiple E-mails and merges them into a single E-mail with accumulated context as an optional feature to reduce spam</li>
<li>Supports multiple template engines with large communities and great support: <code>Tera</code>, <code>Liquid</code> and <code>Handlebars</code></li>
<li>(To be implemented) Allowing custom functionalities such as embedding dynamic QRCodes or defanging untrusted URLs, IP Addresses and E-mail addresses</li>
<li>More community ideas to follow...</li>
</ul>
<h3 id="smart-templates--marketplace"><a class="header" href="#smart-templates--marketplace">Smart Templates &amp; Marketplace</a></h3>
<p>Logically separates the front-end, back-end and data layers which should allow for easier community adaption (one is not required to understand all layers when using, maintaining or configuring the tool) </p>
<ul>
<li>
<p>Develop or use ready Smart Templates that are programmed to act differently upon varying data inputs</p>
</li>
<li>
<p>(WIP) Download or share Smart Templates with the community marketplace</p>
</li>
</ul>
<h3 id="minimalist--reliable"><a class="header" href="#minimalist--reliable">Minimalist &amp; Reliable</a></h3>
<p>It is written in the Rust programming language which is both highly reliable and packs all mentioned capabilities in a single, small, high-performing executable (Cloud friendly).</p>
<h3 id="mvp-status"><a class="header" href="#mvp-status">MVP Status</a></h3>
<p>The project is still in Minimum Viable Product state and is subject to constant change.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="osa-mailer-setup"><a class="header" href="#osa-mailer-setup">OSA-Mailer Setup</a></h1>
<h2 id="preface"><a class="header" href="#preface">Preface</a></h2>
<p>Currently, OSA-Mailer simply checks its <code>outbox</code> directory each time it is executed. As the development is proceeding towards a stable, complete version, OSA-Mailer is currently built only for Windows (i686 to support both 32bit and 64bit architectures) but of course the source code could be built into any architecture that is supported by LLVM &amp; Rust.</p>
<p>If you wish for an early build for Linux, or any other architectural build, feel free to open a <a href="https://github.com/DK26/osa-mailer/discussions/new/choose">discussion</a> about it.</p>
<p>Since at this stage there is no point to invest in an installer, nothing special is required but to extract OSA-Mailer from its 7zip archive and to execute the binary on regular cycles (1 minute, 10 minutes, etc.).</p>
<p>The following chapters will provide step-by-step instructions on how to configure and deploy OSA-Mailer.</p>
<p>Download the most current 7zip archive (.7z) asset of OSA-Mailer from the <a href="https://github.com/DK26/osa-mailer/releases">releases</a> page (e.g. <code>osamailer-alpha-2.7z</code>) and follow the instructions in the following chapters.</p>
<h2 id="roadmap"><a class="header" href="#roadmap">Roadmap</a></h2>
<ul>
<li>Windows Service (Installer)</li>
<li>*nix Service (Package)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="windows-setup"><a class="header" href="#windows-setup">Windows Setup</a></h1>
<h2 id="preface-1"><a class="header" href="#preface-1">Preface</a></h2>
<p>At this stage of the development, there is no installer.</p>
<p>Currently the way to use <em>OSA-Mailer</em> is it have an external system to run its run script <code>osa_mailer.cmd</code></p>
<h2 id="preparations"><a class="header" href="#preparations">Preparations</a></h2>
<blockquote>
<h2 id="download"><a class="header" href="#download">Download</a></h2>
<p><strong>Steps:</strong></p>
<ol>
<li>Get to the <a href="https://github.com/DK26/osa-mailer/releases">releases</a> page</li>
<li>Pick the latest version of <em>OSA-Mailer</em></li>
<li>Expand the <code>Assets</code> title by clicking on it</li>
<li>Pick the <code>.7z</code> 7-zip archive file for Windows and click on it to start downloading</li>
</ol>
</blockquote>
<blockquote>
<h2 id="extract"><a class="header" href="#extract">Extract</a></h2>
<p>In order to extract a 7-zip archive, you need an extractor that supports it. Your best bet is probably to download the official 7-zip from its website <a href="https://www.7-zip.org/">https://www.7-zip.org/</a></p>
<p><strong>Steps:</strong></p>
<ol>
<li>Extract the archived file from the <code>Download</code> section anywhere you like, but make sure you will have controlled access to the extracted <code>outbox</code> directory as this directory serves clients as a gateway for sending E-mails</li>
</ol>
</blockquote>
<blockquote>
<h2 id="configure"><a class="header" href="#configure">Configure</a></h2>
<p><code>osa_mailer.cmd</code> :</p>
<pre><code class="language-batch">:: Configurations
SET SERVER=localhost
SET PORT=25
SET AUTH=noauth
::SET USERNAME=username
::SET PASSWORD=password
</code></pre>
<p><strong>Steps:</strong></p>
<ol>
<li>Edit the script file <code>osa_mailer.cmd</code> with your favorite text editor</li>
<li>Look for the <code>:: Configurations</code> comment</li>
<li>Notice the <code>SET</code> statements which set each environment variable for <em>OSA-Mailer</em></li>
<li>Configure each <em>environment variable</em> accordingly</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>Environment Variable</th><th>Description</th><th>Mandatory</th></tr></thead><tbody>
<tr><td><code>SERVER</code></td><td>SMTP server IP address or hostname (e.g. Gmail, Outlook, SMTP relay-proxy, etc.)</td><td>✅</td></tr>
<tr><td><code>PORT</code></td><td>The TCP port number for the <code>SERVER</code> variable</td><td>✅</td></tr>
<tr><td><code>AUTH</code></td><td>Authentication method: <code>TLS</code>, <code>STARTTLS</code> or <code>NOAUTH</code></td><td>✅</td></tr>
<tr><td><code>USERNAME</code></td><td>Provides the username when using an authentication method other than <code>NOAUTH</code></td><td>❌</td></tr>
<tr><td><code>PASSWORD</code></td><td>Provides the password when using an authentication method other than <code>NOAUTH</code></td><td>❌</td></tr>
</tbody></table>
</div>
<ul>
<li><em>To uncomment a variable, remove the double-colons <code>::</code> from its <code>SET</code> statement (e.g. <code>::SET USERNAME=username</code> becomes <code>SET USERNAME=username</code>)</em></li>
</ul>
</blockquote>
<h2 id="setup-a-task-for-windows-task-scheduler"><a class="header" href="#setup-a-task-for-windows-task-scheduler">Setup a Task for Windows Task Scheduler</a></h2>
<p>Windows Task Scheduler can be used as a means to trigger and activate <em>OSA-Mailer</em>, but it is <strong>not</strong> a requirement in case it doesn't fit your use-case.</p>
<blockquote>
<h3 id="open-the-windows-task-scheduler"><a class="header" href="#open-the-windows-task-scheduler">Open the Windows Task Scheduler</a></h3>
<p>Here are a few links to external articles on different methods to launch the Windows Task Schedular:</p>
<ul>
<li><a href="https://www.wikihow.com/Open-Task-Scheduler-in-Windows-10">Windows 10</a></li>
<li><a href="https://www.makeuseof.com/windows-11-open-task-scheduler/">Windows 11</a></li>
</ul>
<p>Here is one way to do this:<br />
In order to open the Windows Task Schedular, we will use a <code>Run</code> command:</p>
<ol>
<li>Hold the <code>Windows</code> button + press the <code>R</code> button</li>
<li>This should open the <code>Run</code> window</li>
<li>Type in: <code>taskschd.msc</code> and either click the <code>OK</code> button or press the <code>ENTER</code> key</li>
</ol>
<p><img src="images/windows_task_scheduler/taskschd.png" alt="Run" /></p>
<p><img src="images/windows_task_scheduler/task_scheduler.png" alt="Windows Task Scheduler" /> </p>
</blockquote>
<blockquote>
<h3 id="create-a-new-task"><a class="header" href="#create-a-new-task">Create a new Task</a></h3>
<p>It is recommended to create the task within a dedicated folder so it will be easier to maintain and not mix-up with other unrelated tasks.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>On the left pane, select the <code>Task Scheduler Library</code> directory by clicking on it once with the <code>LEFT MOUSE BUTTON</code> </li>
<li>Once selected, <code>RIGHT MOUSE BUTTON</code> click on the already selected <code>Task Scheduler Library</code>, to open the actions menu</li>
<li>Select <code>New Folder...</code> from the actions menu</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_create_new_folder.png" alt="Task Scheduler New Folder" /></p>
<ol start="4">
<li>Pick a proper name (<code>OSA-Mailer</code> is recommended) and either click on the <code>OK</code> button or press the <code>ENTER</code> key</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_new_folder.png" alt="Task Scheduler New Folder Name" /></p>
<ol start="5">
<li>Select the newly created folder by a single <code>LEFT MOUSE BUTTON</code> click</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_new_folder_2.png" alt="Task Scheduler New Folder Created" /></p>
<ol start="6">
<li>Once selected, <code>RIGHT MOUSE BUTTON</code> click on it again to pop the actions menu </li>
<li>Select the <code>Create Task...</code> from the actions menu</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_create_task.png" alt="Task Scheduler New Task" /></p>
<ol start="8">
<li>The <code>Create Task</code> window will pop-up</li>
<li>Provide the name for the task: <code>Check Outbox</code> (recommended)</li>
<li>Under <code>Security options</code>, select the <code>Run whether user is logged on or not</code> and check the <code>Do not store password. The task will only have access to local computer resources.</code> checkbox</li>
<li>Click on the <code>Triggers</code> tab</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_new_task.png" alt="Task Scheduler Create Task" /></p>
<ol start="12">
<li>On the <code>Triggers</code> tab, click on the <code>New...</code> button to create a new trigger</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_create_task_triggers.png" alt="Task Scheduler Task Triggers" /></p>
<ol start="13">
<li>The <code>New Trigger</code> window will pop-up</li>
<li>Make sure that <code>Begin the task:</code> is set to <code>On a schedule</code></li>
<li>Make sure that <code>Settings</code> is set on <code>One time</code></li>
<li>Under <code>Advanced settings</code>, make sure that the <code>Repeat task every:</code> checkbox is checked</li>
<li><strong>(Recommended)</strong>: Manually copy the value <code>1 minute</code> and assign it</li>
<li>Make sure that <code>for a duration of:</code> is set to <code>Indefinitely</code></li>
<li>Make sure that the <code>Enabled</code> checkbox is checked</li>
<li>Click on the <code>OK</code> button to the add the trigger</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_create_task_triggers_2.png" alt="Task Scheduler New Trigger" /></p>
<ol start="21">
<li>Click on the <code>Actions</code> tab</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_new_trigger.png" alt="Task Scheduler After New Trigger" /></p>
<ol start="22">
<li>On the <code>Actions</code> tab, click on the <code>New...</code> button to create a new action</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_actions.png" alt="Task Scheduler New Actions" /></p>
<ol start="23">
<li>The <code>New Action</code> window will pop-up</li>
<li>Under the <code>Program/script:</code>  textbox, assign the path to where the <code>osa_mailer.cmd</code> file is located</li>
</ol>
<ul>
<li><strong>Optional:</strong> You can click on the <code>Browse...</code> button to locate the <code>osa_mailer.cmd</code> file</li>
</ul>
<ol start="25">
<li>Click on the <code>OK</code> button to add the action</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_edit_action.png" alt="Task Scheduler New Actions" /></p>
<ol start="26">
<li>Click on the <code>Conditions</code> tab</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_new_action.png" alt="Task Scheduler Conditions" /></p>
<ol start="27">
<li>Make sure that there are no conditions in place and all checkboxes are unchecked</li>
<li>Click on the <code>Settings</code> tab</li>
</ol>
<p><img src="images/windows_task_scheduler/task_scheduler_conditions.png" alt="Task Scheduler Conditions" /></p>
<ol start="29">
<li>Make sure that only the following checkboxes are checked:</li>
</ol>
<ul>
<li><code>Allow task to be run on demand</code></li>
<li><code>Run task as soon as possible after a scheduled start is missed</code></li>
<li><code>If the running task does not end when requested, force it to stop</code></li>
<li>Make sure that the field <code>If the task is already running, then the following rule applies:</code> has the value <code>Do not start a new instance</code> in its dropbox</li>
<li>Make sure the rest of the checkboxes are unchecked</li>
<li>Click on the <code>OK</code> button to create the task</li>
</ul>
<p><img src="images/windows_task_scheduler/task_scheduler_settings.png" alt="Task Scheduler Conditions" /></p>
<ol start="30">
<li>We are <em>finished</em>. You can close the Windows Task Scheduler</li>
</ol>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sending-an-e-mail"><a class="header" href="#sending-an-e-mail">Sending an E-mail</a></h1>
<p>On every run, <em>OSA-Mailer</em> is scanning its <code>outbox</code> directory for new E-mail entries.</p>
<p>Each E-mail entry is represented as a JSON document file. </p>
<p>An E-mail entry can be though of as just a single <em>&quot;send E-mail&quot;</em> request that contains all details required to send it.</p>
<p>When attempting to send multiple E-mails to the same recipients, on the same subject, having a common denominator, they are all considered to be E-mail <em>entries</em> that compose the same, single E-mail (&quot;Composed E-mail&quot;), that represents the final product to be sent to your recipients.</p>
<p>You can have a relation of multiple E-mail entries per one composed E-mail
or one E-mail entry per one composed E-mail. It depends on your personal configurations.</p>
<p>Once the E-mail entry is processed and sent <em><strong>successfully</strong></em>, it is deleted from the <code>outbox</code> directory.</p>
<blockquote>
<p>🚨 <strong>If the <code>.json</code> entry file is not <em>deleted</em> from the <code>outbox</code> directory, then an <em>error</em> might have occurred. You can check the <code>logs</code> directory to get more details about the errors.</strong></p>
</blockquote>
<h2 id="outbox-directory"><a class="header" href="#outbox-directory">Outbox Directory</a></h2>
<p>In order to send an E-mail, we have to produce an E-mail entry which is a JSON document that contains all details required to send it, and place it in the <code>outbox</code> directory.</p>
<p>Using the <code>outbox</code> directory, enables us advanced features such as accumulating multiple E-mails into a single one that is containing accumulate context within its contents. This reduces spam in our recipients' inbox and provides them with more concise E-mails.</p>
<p>Other future features are in-bound such as delayed E-mails, etc. All of these features and more, are only possible to achieve when using an <code>outbox</code> directory to accumulate E-mails.</p>
<blockquote>
<p>Notice: In the future, we may use a database or provide an option for a database. For our MVP, we just put JSON files in the <code>outbox</code> directory</p>
</blockquote>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<blockquote>
<p>📦osa_mailer<br />
┣ 📂outbox  👈<br />
┃ ┣ 🗎my_non_standard_email_entry.json<br />
┃ ┣ 🗎a40a6508.3b0c7586049dd2.c8e7d381.3e5f6e98.json<br />
┃ ┗ 🗎a40a6508.3b119a8fafdc3a.72e3d49e.fc982089.json<br />
...</p>
</blockquote>
<h2 id="e-mail-entry-name-convention"><a class="header" href="#e-mail-entry-name-convention">E-mail Entry Name Convention</a></h2>
<p>The following describes the current, non-binding standard for E-mail entry file name convention:</p>
<blockquote>
<p><strong>{<code>E-mail ID</code>}.{<code>Timestamp</code>}.{<code>Entry ID</code>}.{<code>Checksum</code>}.json</strong></p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td><code>E-mail ID</code></td><td>A unique ID to identify the E-mail, produced by hashing the <code>email</code> part of the entry, encoded in hexadecimal</td></tr>
<tr><td><code>Timestamp</code></td><td>Creation time in nanoseconds, encoded in hexadecimal</td></tr>
<tr><td><code>Entry ID</code></td><td>A unique ID to identify the entry, extracted from the entry itself</td></tr>
<tr><td><code>Checksum</code></td><td>A unique CRC32 checksum of the entire entry file, encoded in hexadecimal</td></tr>
</tbody></table>
</div>
<blockquote>
<p>🚨 <strong>The file name convention isn't mandatory but it helps in debugging and avoiding coalitions when auto-generating E-mail entries. The standard is embedded in the <code>new_entry.py</code> script file which is located under the <code>mail_producer</code> directory</strong></p>
</blockquote>
<p>The following chapters will demonstrate how to compose an E-mail entry JSON document.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="common-e-mail-entry"><a class="header" href="#common-e-mail-entry">Common E-mail Entry</a></h1>
<p>The following example represents an E-mail entry. </p>
<p>Currently, it is mandatory to be explicit about all possible fields. However it is not required to fill every possible field.</p>
<p>In the following examples, we will explain the roles of every key and JSON object.</p>
<h2 id="entry-object-structure"><a class="header" href="#entry-object-structure">Entry Object Structure</a></h2>
<p>Here is the base structure of every E-mail entry:</p>
<h3 id="example-1"><a class="header" href="#example-1">Example</a></h3>
<pre><code class="language-json">{
    &quot;id&quot;: &quot;&lt;ENTRY ID&gt;&quot;,
    &quot;utc&quot;: &quot;&lt;SEND TIMESTAMP IN UTC ISO 8601 RFC3339 FORMAT&gt;&quot;,
    &quot;notify_error&quot;: [ &quot;&lt;OPTIONAL E-MAIL ADDRESS FOR ERROR NOTIFICATIONS&gt;&quot; ],
    &quot;email&quot;: {
        &quot;&lt;KEY-VALUE&gt;&quot;: &quot;&lt;KEY-VALUE INPUTS, DESCRIBING HOW TO SEND THE E-MAIL&gt;&quot;
    },
    &quot;context&quot;: {
        &quot;&lt;KEY-VALUE&gt;&quot;: &quot;&lt;KEY-VALUE INPUTS, DESCRIBING THE DATA FOR THE HTML TEMPLATE&gt;&quot;
    }
}
</code></pre>
<p>The structure above is common among all E-mail entries. What varies are the assigned values.</p>
<div class="table-wrapper"><table><thead><tr><th>Data Name</th><th>Data Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>id</code></td><td><code>string</code></td><td>A unique ID provided by the entry generator. There is no mandatory standard. The only requirement is that each entry must have a unique value</td></tr>
<tr><td><code>utc</code></td><td><code>string</code></td><td>A UTC timestamp value in the ISO 8601 RFC3339 standard</td></tr>
<tr><td><code>notify_error</code></td><td><code>array</code> of <code>string</code>s</td><td>A list of E-mail addresses to be notified about errors (not implemented yet)</td></tr>
<tr><td><code>email</code></td><td><code>object</code></td><td>A dictionary or map of values that describes the E-mail to be sent. e.g. subject, recipients, attachments, HTML template, etc.</td></tr>
<tr><td><code>context</code></td><td><code>object</code></td><td>Context variables for the HTML template</td></tr>
</tbody></table>
</div>
<h2 id="e-mail-object-structure"><a class="header" href="#e-mail-object-structure">E-mail Object Structure</a></h2>
<p>The <em><code>email</code> object</em> within the <em>entry object</em>, is composed of the following structure:</p>
<h3 id="example-2"><a class="header" href="#example-2">Example</a></h3>
<pre><code class="language-json">{
    &quot;email&quot;: {
        &quot;system&quot;: &quot;My Automations System&quot;,
        &quot;subsystem&quot;: &quot;[ID:12345] Trigger: Server Disk Out-of-Storage&quot;,
        &quot;from&quot;: &quot;Ops Auto-Mailing System &lt;tech-support@example.com&gt;&quot;,
        &quot;reply_to&quot;: [
            &quot;System Admin &lt;admin@example.com&gt;&quot;,
            &quot;Project Lead &lt;lead@example.com&gt;&quot;
        ],
        &quot;to&quot;: [ &quot;Rick S. &lt;rick_s@example.com&gt;&quot; ],
        &quot;cc&quot;: [],
        &quot;bcc&quot;: [],
        &quot;subject&quot;: &quot;ATTENTION! Your server is out-of-storage&quot;,
        &quot;template&quot;: &quot;ops_department&quot;,
        &quot;alternative_content&quot;: &quot;Unable to render HTML. Please refer to the Ops department for details.&quot;,
        &quot;attachments&quot;: [],
        &quot;unique_by&quot;: &quot;&quot;
    }
}

</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Data Name</th><th>Data Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>system</code></td><td><code>string</code></td><td>The name of the external system that uses OSA-Mailer</td></tr>
<tr><td><code>subsystem</code></td><td><code>string</code></td><td>The name of the subsystem that uses OSA-Mailer. e.g. Name of the trigger or rule that fired or activated OSA-Mailer, within the external system</td></tr>
<tr><td><code>from</code></td><td><code>string</code></td><td>The E-mail address of the sender</td></tr>
<tr><td><code>reply_to</code></td><td><code>array</code> of <code>string</code>s</td><td>An optional array of E-mail addresses to re-direct replies to</td></tr>
<tr><td><code>to</code></td><td><code>array</code> of <code>string</code>s</td><td>An array of E-mail addresses representing the <code>To:</code> recipients</td></tr>
<tr><td><code>cc</code></td><td><code>array</code> of <code>string</code>s</td><td>An array of E-mail addresses representing the <code>Cc:</code> copy to recipients</td></tr>
<tr><td><code>bcc</code></td><td><code>array</code> of <code>string</code>s</td><td>An array of E-mail addresses representing the <code>Bcc:</code> hidden recipients</td></tr>
<tr><td><code>subject</code></td><td><code>string</code></td><td>The E-mail subject</td></tr>
<tr><td><code>template</code></td><td><code>string</code></td><td>The selected template for the message body, located under the <code>templates</code> directory</td></tr>
<tr><td><code>alternative_content</code></td><td><code>string</code></td><td>The message to be displayed for clients that cannot render the HTML body of the message. Some E-mail clients use this value for message preview</td></tr>
<tr><td><code>attachments</code></td><td><code>array</code> of <code>string</code>s</td><td>An array of file paths to attach</td></tr>
<tr><td><code>unique_by</code></td><td><code>string</code></td><td>An optional aid field to assist in generating a unique E-mail ID by providing custom values. This provides us the ability to affect how E-mails are accumulated</td></tr>
</tbody></table>
</div>
<blockquote>
<p>The entire <em><code>email</code></em> object is hashed in order to identify it and provide a unique E-mail ID. Multiple E-mails with the same ID, can be optionally accumulated into a single E-mail.</p>
</blockquote>
<h2 id="context-object-structure"><a class="header" href="#context-object-structure">Context Object Structure</a></h2>
<p>The <em><code>context</code> object</em> within the <em>entry object</em>, can be freely composed of any JSON value. Every <em>key</em> within the <em><code>context</code> object</em>, is passed down to the selected <code>template</code></p>
<h3 id="example-3"><a class="header" href="#example-3">Example</a></h3>
<p>The following JSON context, can be accessed within its following HTML template example:</p>
<pre><code class="language-json">{
    &quot;context&quot;: {
        &quot;message&quot;: &quot;Hello, world!&quot;,
        &quot;items&quot;: [ &quot;apple&quot;, &quot;orange&quot;, &quot;watermelon&quot; ]
    }
}

</code></pre>
<p>HTML template using the <code>handlebars</code> engine for rendering:</p>
<pre><code class="language-html">&lt;!--TEMPLATE handlebars--&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Email Template&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div&gt;
        &lt;h1&gt;{{ message }}&lt;/h1&gt;
        &lt;p&gt;Here's the list of items:&lt;/p&gt;
        &lt;ul&gt;
            {{#each items}}
                &lt;li&gt;{{ this }}&lt;/li&gt;
            {{/each}}
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<blockquote>
<p>There are 3 supported template engines at the moment: <a href="https://handlebarsjs.com/guide/"><code>Handlebars</code></a>, <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers"><code>Liquid</code></a> and <a href="https://tera.netlify.app/docs/#templates"><code>Tera</code></a>. You can tell <em>OSA-Mailer</em> how to render the template with a special magic comment at the beginning of the HTML file <code>&lt;--TEMPLATE [ENGINE NAME]--&gt;</code> (case insensitive)</p>
</blockquote>
<blockquote>
<p>🚨 At the moment, there are still standards to be formulated. It is within my hopes that once the project attracts attention, a community consensus will be established. So far, I try to avoid creating limits and only formulate what seems to me absolutely necessary. Striving for a standard is somewhat necessary so different clients and different potential backends, could still interface with each other with minimal to no modifications or adaptions</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-e-mail"><a class="header" href="#basic-e-mail">Basic E-mail</a></h1>
<p>Here is a full example:</p>
<pre><code class="language-json">{
    &quot;id&quot;: &quot;fed5cadb&quot;,
    &quot;utc&quot;: &quot;2022-09-01T22:44:11.852662+00:00&quot;,
    &quot;notify_error&quot;: [
        &quot;Developers &lt;dev-team@example.com&gt;&quot;
    ],
    &quot;email&quot;: {
        &quot;system&quot;: &quot;My Automations System&quot;,
        &quot;subsystem&quot;: &quot;[ID:12345] Trigger: Server Disk Out-of-Space&quot;,
        &quot;from&quot;: &quot;Mail System &lt;tech-support@example.com&gt;&quot;,
        &quot;to&quot;: [
            &quot;Rick S. &lt;rick_s@example.com&gt;&quot;
        ],
        &quot;cc&quot;: [],
        &quot;bcc&quot;: [],
        &quot;reply_to&quot;: [
            &quot;System Admin &lt;admin@example.com&gt;&quot;,
            &quot;Project Lead &lt;lead@example.com&gt;&quot;
        ],
        &quot;subject&quot;: &quot;Warning: Your server's disk is out-of-space&quot;,
        &quot;template&quot;: &quot;ops_department&quot;,
        &quot;alternative_content&quot;: &quot;Unable to render HTML. Please refer to the Ops department for details.&quot;,
        &quot;attachments&quot;: [],
        &quot;unique_by&quot;: &quot;&quot;
    },
    &quot;context&quot;: {
        &quot;message&quot;: {
            &quot;heading&quot;: &quot;Detected Problems in Your Server&quot;,
            &quot;body&quot;: &quot;We have detected a disk capacity problem with one or more of your servers. Please refer to the instructions below&quot;
        }
    }
}
</code></pre>
<h2 id="templates"><a class="header" href="#templates">Templates</a></h2>
<p>The <code>templates</code> directory is meant to contain all templates in separated directories, with their (optional) <em>resources</em> and <em>assets</em> included, where each directory name represents the template's name.</p>
<p>The template index file is called <code>template.html</code>. In the example above, we use the <code>ops_department</code> template. </p>
<p>Under the <code>templates</code> directory, create a directory called <code>ops_department</code> and then create a text file and name it  <code>template.html</code></p>
<p>Copy the following HTML content into <code>template.html</code> and save the file.</p>
<h2 id="example-4"><a class="header" href="#example-4">Example</a></h2>
<blockquote>
<p>📦osa_mailer<br />
┣ 📂templates<br />
┃ ┗ 📂ops_department<br />
┃  ┗ 🗎template.html  👈<br />
...</p>
</blockquote>
<pre><code class="language-html">&lt;!--TEMPLATE handlebars--&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Email Template&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; bgcolor=&quot;#f4f4f4&quot;&gt;
        &lt;tr&gt;
            &lt;td align=&quot;center&quot; valign=&quot;top&quot;&gt;
                &lt;table width=&quot;600&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;20&quot; bgcolor=&quot;#ffffff&quot;&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; valign=&quot;top&quot;&gt;
                            &lt;h1&gt;{{message.heading}}&lt;/h1&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; valign=&quot;top&quot;&gt;
                            &lt;p&gt;{{message.body}}&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/table&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="open-source-community-vision"><a class="header" href="#open-source-community-vision">Open Source Community Vision</a></h1>
<p>Some tools are developed in workplaces for niche use-cases that repeat between different companies, workplaces and clients, where skilled workers find themselves create, write and design the same tools over and over again, having no common standard.</p>
<p>My vision is to create some of these tools to be publicly available for free, encourage and build an open-source community around them in order to:</p>
<ul>
<li>Provide a common language and standard for common niche projects</li>
<li>Provide quick-to-deploy, high-quality, capable and reliable solutions to impress our bosses or clients</li>
<li>Gain common, shared, technical experience around them to configure and maintain them, providing better support </li>
<li>Provide higher quality of manpower for companies by providing potential workers with relevant experience for common community tools with excellent resources</li>
<li>Create job opportunities for the community as they easily solve their bosses or clients problems with easy to maintain, standard community solutions </li>
</ul>
<p><em>— David Krasnitsky</em></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
